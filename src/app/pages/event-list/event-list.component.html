  <section class="max-w-6xl mx-auto px-4 pt-6 pb-16 select-none">
    <!-- HEADER -->
    <article class="relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl ring-1 ring-white/10 shadow-2xl mb-6">
      <div class="pointer-events-none absolute -top-24 -left-24 h-64 w-64 rounded-full bg-pink-500/20 blur-3xl"></div>
      <div class="pointer-events-none absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/20 blur-3xl"></div>

      <div class="relative p-5 md:p-6">
        <div class="flex items-start justify-between gap-3">
          <div>
            <h1 class="text-2xl md:text-3xl font-extrabold text-white">Eventos</h1>
            <p class="text-sm text-slate-400 mt-1">Explora, busca y filtra eventos del club.</p>
          </div>
          <button
            type="button"
            class="inline-flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-semibold
                   text-white bg-gradient-to-r from-pink-500 to-fuchsia-600
                   shadow-[0_10px_30px_-10px_rgba(236,72,153,0.6)]
                   hover:from-pink-400 hover:to-fuchsia-500 transition focus:outline-none"
          >
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Crear evento
          </button>
        </div>

        <!-- FILTROS -->
        <div class="mt-4 grid grid-cols-1 md:grid-cols-6 gap-3">
          <!-- Buscador -->
          <div class="md:col-span-3">
            <div class="relative">
              <input
                type="text"
                [(ngModel)]="q"
                (keyup.enter)="applyFilters()"
                placeholder="Buscar por título, club, venue…"
                class="w-full rounded-xl border border-white/10 bg-white/5 text-slate-100
                       placeholder:text-slate-400 px-4 py-2.5 pr-12 outline-none
                       focus:ring-2 focus:ring-pink-500/40"
                autocomplete="off"
              />
              <button
                type="button"
                class="absolute right-1.5 top-1.5 rounded-lg px-3 py-1.5 text-sm font-semibold
                       text-slate-200 hover:bg-white/10 border border-white/10"
                (click)="applyFilters()"
              >
                Buscar
              </button>
            </div>
          </div>

          <!-- Desde / Hasta -->
          <div class="md:col-span-1">
            <label class="block text-xs text-slate-400 mb-1">Desde</label>
            <input type="date" [(ngModel)]="dateFrom"
              class="w-full rounded-xl border border-white/10 bg-white/5 text-slate-100 px-3 py-2.5
                     focus:ring-2 focus:ring-pink-500/40 outline-none"/>
          </div>
          <div class="md:col-span-1">
            <label class="block text-xs text-slate-400 mb-1">Hasta</label>
            <input type="date" [(ngModel)]="dateTo"
              class="w-full rounded-xl border border-white/10 bg-white/5 text-slate-100 px-3 py-2.5
                     focus:ring-2 focus:ring-pink-500/40 outline-none"/>
          </div>

          <!-- Club -->
          <div class="md:col-span-1">
            <label class="block text-xs text-slate-400 mb-1">Club</label>
            <select
              [(ngModel)]="club"
              class="w-full rounded-xl border border-white/10 bg-white/5 text-slate-100 px-3 py-2.5
                     focus:ring-2 focus:ring-pink-500/40 outline-none">
              <option value="">Todos</option>
              @for (c of clubs; track c.id) {
                <option [value]="c.id">{{ c.name }}</option>
              }
            </select>
          </div>
        </div>

        <!-- Chips categorías -->
         <app-categories />
      </div>
    </article>

    <!-- META RESUMEN -->
    <div class="mb-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="inline-flex items-center rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-semibold text-slate-200">
          Resultados
        </span>
        <span class="text-xs text-slate-400/80">Mostrando
          <strong class="text-slate-200">{{ startIndex + 1 }}</strong>–<strong class="text-slate-200">{{ endIndex }}</strong>
          de <strong class="text-slate-200">{{ filtered.length }}</strong></span>
      </div>
      <div class="text-xs text-slate-400">
        Página <span class="text-slate-200 font-semibold">{{ page + 1 }}</span> / <span class="text-slate-200 font-semibold">{{ totalPages }}</span>
      </div>
    </div>

    <!-- GRID / LISTA -->
    @if (isLoading) {
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
        @for (s of [0,1,2,3,4,5,6,7]; track $index) {
          <div class="h-64 rounded-2xl border border-white/10 bg-white/5 animate-pulse"></div>
        }
      </div>
    } @else {
      @if (!paged.length) {
        <div class="rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl ring-1 ring-white/10 p-10 text-center">
          <p class="text-slate-300 font-semibold">No se encontraron eventos.</p>
          <p class="text-sm text-slate-400 mt-1">Prueba cambiando los filtros o la búsqueda.</p>
        </div>
      } @else {
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
          @for (ev of paged; track ev.id) {
            <article
              class="group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl ring-1 ring-white/10 shadow-xl transition
                     hover:shadow-2xl hover:ring-white/20"
            >
              <!-- cover -->
              <div class="relative aspect-[16/10] bg-neutral-900">
                <img [src]="ev.imageUrl || '/assets/placeholder-cover.jpg'" alt="Cover {{ ev.title }}" class="h-full w-full object-cover" />
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"></div>

                <!-- date badge -->
                <div class="absolute top-2 left-2 flex flex-col items-center justify-center w-14 rounded-xl bg-neutral-900/90 text-white text-center ring-1 ring-white/20">
                  <div class="text-[10px] font-semibold tracking-wide uppercase py-1">{{ nextDate(ev) | date:'MMM' }}</div>
                  <div class="text-lg font-extrabold leading-none pb-1">{{ nextDate(ev) | date:'dd' }}</div>
                </div>

                <!-- category pill -->
                <div class="absolute -bottom-3 left-4">
                  <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-neutral-900/80 text-white text-xs font-semibold ring-2 ring-pink-500/60 shadow-[0_6px_20px_-6px_rgba(236,72,153,0.6)]">
                    {{ ev.category }}
                  </span>
                </div>
              </div>

              <!-- body -->
              <div class="px-4 pt-6 pb-4">
                <h3 class="text-white font-extrabold text-base leading-snug line-clamp-2">
                  {{ ev.title }}
                </h3>
                <div class="mt-2 flex items-center gap-2 text-neutral-300">
                  <svg viewBox="0 0 24 24" class="h-5 w-5 opacity-70" fill="currentColor" aria-hidden="true">
                    <path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/>
                  </svg>
                  <span class="text-sm truncate">{{ ev.venue }}</span>
                </div>
                <div class="mt-1 text-xs text-slate-400">Club: <span class="text-slate-200">{{ ev.clubName }}</span></div>
              </div>
            </article>
          }
        </div>
      }
    }

    <!-- PAGINACIÓN -->
    <div class="mt-6 flex items-center justify-between">
      <div class="text-sm text-slate-400">
        Mostrando <span class="text-slate-200 font-semibold">{{ startIndex + 1 }}</span>–<span class="text-slate-200 font-semibold">{{ endIndex }}</span>
        de <span class="text-slate-200 font-semibold">{{ filtered.length }}</span>
      </div>
      <div class="inline-flex items-center gap-2">
        <button
          type="button"
          class="rounded-lg border border-white/10 px-3 py-1.5 text-sm text-slate-200 hover:bg-white/10 disabled:opacity-50"
          (click)="prevPage()" [disabled]="page === 0">◀</button>
        <span class="text-sm text-slate-300">{{ page + 1 }} / {{ totalPages }}</span>
        <button
          type="button"
          class="rounded-lg border border-white/10 px-3 py-1.5 text-sm text-slate-200 hover:bg-white/10 disabled:opacity-50"
          (click)="nextPage()" [disabled]="page + 1 >= totalPages">▶</button>
      </div>
    </div>
  </section>